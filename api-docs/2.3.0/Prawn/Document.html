<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Prawn::Document
  
    &mdash; Prawn Documentation
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Prawn::Document";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span>
     &raquo; 
    <span class="title">Document</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Prawn::Document
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Prawn::Document</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>PDF::Core::Annotations, PDF::Core::Destinations, <span class='object_link'><a href="Document/Security.html" title="Prawn::Document::Security (module)">Security</a></span>, <span class='object_link'><a href="Graphics.html" title="Prawn::Graphics (module)">Graphics</a></span>, <span class='object_link'><a href="Images.html" title="Prawn::Images (module)">Images</a></span>, <span class='object_link'><a href="SoftMask.html" title="Prawn::SoftMask (module)">SoftMask</a></span>, <span class='object_link'><a href="Stamp.html" title="Prawn::Stamp (module)">Stamp</a></span>, <span class='object_link'><a href="Text.html" title="Prawn::Text (module)">Text</a></span>, <span class='object_link'><a href="TransformationStack.html" title="Prawn::TransformationStack (module)">TransformationStack</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/prawn/document.rb<span class="defines">,<br />
  lib/prawn/font.rb,<br /> lib/prawn/grid.rb,<br /> lib/prawn/outline.rb,<br /> lib/prawn/repeater.rb,<br /> lib/prawn/security.rb,<br /> lib/prawn/document/span.rb,<br /> lib/prawn/document/internals.rb,<br /> lib/prawn/document/column_box.rb,<br /> lib/prawn/document/bounding_box.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The Prawn::Document class is how you start creating a PDF document.</p>

<p>There are three basic ways you can instantiate PDF Documents in Prawn, they are through assignment, implicit block or explicit block.  Below is an example of each type, each example does exactly the same thing, makes a PDF document with all the defaults and puts in the default font “Hello There” and then saves it to the current directory as “example.pdf”</p>

<p>For example, assignment can be like this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'>Document</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Prawn::Document#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello There</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_render_file'>render_file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>example.pdf</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>Or you can do an implied block form:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'>Document</span><span class='period'>.</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="#generate-class_method" title="Prawn::Document.generate (method)">generate</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>example.pdf</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello There</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>Or if you need to access a variable outside the scope of the block, the explicit block form:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_words'>words</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello There</span><span class='tstring_end'>&quot;</span></span>
<span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'>Document</span><span class='period'>.</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="#generate-class_method" title="Prawn::Document.generate (method)">generate</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>example.pdf</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pdf'>pdf</span><span class='op'>|</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='id identifier rubyid_words'>words</span>
<span class='kw'>end</span>
</code></pre>

<p>Usually, the block forms are used when you are simply creating a PDF document that you want to immediately save or render out.</p>

<p>See the new and generate methods for further details on the above.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Document/Security.html" title="Prawn::Document::Security (module)">Security</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Document/BoundingBox.html" title="Prawn::Document::BoundingBox (class)">BoundingBox</a></span>, <span class='object_link'><a href="Document/ColumnBox.html" title="Prawn::Document::ColumnBox (class)">ColumnBox</a></span>, <span class='object_link'><a href="Document/Grid.html" title="Prawn::Document::Grid (class)">Grid</a></span>, <span class='object_link'><a href="Document/GridBox.html" title="Prawn::Document::GridBox (class)">GridBox</a></span>, <span class='object_link'><a href="Document/MultiBox.html" title="Prawn::Document::MultiBox (class)">MultiBox</a></span>
    
  
</p>

  
    <h2>
      Extension API
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="VALID_OPTIONS-constant" class="">VALID_OPTIONS =
          <div class="docstring">
  <div class="discussion">
    
<p>NOTE: We probably need to rethink the options validation system, but this constant temporarily allows for extensions to modify the list.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qsymbols_beg'>%i[</span><span class='words_sep'>
  </span><span class='tstring_content'>page_size</span><span class='words_sep'> </span><span class='tstring_content'>page_layout</span><span class='words_sep'> </span><span class='tstring_content'>margin</span><span class='words_sep'> </span><span class='tstring_content'>left_margin</span><span class='words_sep'>
  </span><span class='tstring_content'>right_margin</span><span class='words_sep'> </span><span class='tstring_content'>top_margin</span><span class='words_sep'> </span><span class='tstring_content'>bottom_margin</span><span class='words_sep'> </span><span class='tstring_content'>skip_page_creation</span><span class='words_sep'>
  </span><span class='tstring_content'>compress</span><span class='words_sep'> </span><span class='tstring_content'>background</span><span class='words_sep'> </span><span class='tstring_content'>info</span><span class='words_sep'>
  </span><span class='tstring_content'>text_formatter</span><span class='words_sep'> </span><span class='tstring_content'>print_scaling</span><span class='words_sep'>
</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  



  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="Graphics.html" title="Prawn::Graphics (module)">Graphics</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics.html#KAPPA-constant" title="Prawn::Graphics::KAPPA (constant)">Graphics::KAPPA</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="Graphics/JoinStyle.html" title="Prawn::Graphics::JoinStyle (module)">Graphics::JoinStyle</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics/JoinStyle.html#JOIN_STYLES-constant" title="Prawn::Graphics::JoinStyle::JOIN_STYLES (constant)">Graphics::JoinStyle::JOIN_STYLES</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="Graphics/CapStyle.html" title="Prawn::Graphics::CapStyle (module)">Graphics::CapStyle</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics/CapStyle.html#CAP_STYLES-constant" title="Prawn::Graphics::CapStyle::CAP_STYLES (constant)">Graphics::CapStyle::CAP_STYLES</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="Text.html" title="Prawn::Text (module)">Text</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Text.html#NBSP-constant" title="Prawn::Text::NBSP (constant)">Text::NBSP</a></span>, <span class='object_link'><a href="Text.html#SHY-constant" title="Prawn::Text::SHY (constant)">Text::SHY</a></span>, <span class='object_link'><a href="Text.html#ZWSP-constant" title="Prawn::Text::ZWSP (constant)">Text::ZWSP</a></span></p>


  <h2>Stable Attributes <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#margin_box-instance_method" title="#margin_box (instance method)">#<strong>margin_box</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute margin_box.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#margins-instance_method" title="#margins (instance method)">#<strong>margins</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute margins.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#page_number-instance_method" title="#page_number (instance method)">#<strong>page_number</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute page_number.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#y-instance_method" title="#y (instance method)">#<strong>y</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute y.</p>
</div></span>
  
</li>

    
  </ul>

  <h2>Extension Attributes <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#text_formatter-instance_method" title="#text_formatter (instance method)">#<strong>text_formatter</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute text_formatter.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Stable API
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate-class_method" title="generate (class method)">.<strong>generate</strong>(filename, options = {}, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates and renders a PDF document.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bounding_box-instance_method" title="#bounding_box (instance method)">#<strong>bounding_box</strong>(point, *args, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:call-seq:   bounding_box(point, options={}, &amp;block).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bounds-instance_method" title="#bounds (instance method)">#<strong>bounds</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The bounds method returns the current bounding box you are currently in, which is by default the box represented by the margin box on the document itself.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bounds=-instance_method" title="#bounds= (instance method)">#<strong>bounds=</strong>(bounding_box)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets Document#bounds to the BoundingBox provided.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#canvas-instance_method" title="#canvas (instance method)">#<strong>canvas</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A shortcut to produce a bounding box which is mapped to the document&#39;s absolute coordinates, regardless of how things are nested or margin sizes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cursor-instance_method" title="#cursor (instance method)">#<strong>cursor</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The current y drawing position relative to the innermost bounding box, or to the page margins at the top level.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_page-instance_method" title="#delete_page (instance method)">#<strong>delete_page</strong>(index)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Remove page of the document by index.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#float-instance_method" title="#float (instance method)">#<strong>float</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Executes a block and then restores the original y position.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#font-instance_method" title="#font (instance method)">#<strong>font</strong>(name = nil, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Without arguments, this returns the currently selected font.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#font_families-instance_method" title="#font_families (instance method)">#<strong>font_families</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Hash that maps font family names to their styled individual font names.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#font_size-instance_method" title="#font_size (instance method)">#<strong>font_size</strong>(points = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>When called with no argument, returns the current font size.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#font_size=-instance_method" title="#font_size= (instance method)">#<strong>font_size=</strong>(size)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the font size.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#go_to_page-instance_method" title="#go_to_page (instance method)">#<strong>go_to_page</strong>(page_number)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Re-opens the page with the given (1-based) page number so that you can draw on it.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#indent-instance_method" title="#indent (instance method)">#<strong>indent</strong>(left, right = 0, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Indents the specified number of PDF points for the duration of the block.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(options = {}, &amp;block)  &#x21d2; Document </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new PDF Document.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#move_cursor_to-instance_method" title="#move_cursor_to (instance method)">#<strong>move_cursor_to</strong>(new_y)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Moves to the specified y position in relative terms to the bottom margin.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#move_down-instance_method" title="#move_down (instance method)">#<strong>move_down</strong>(amount)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Moves down the document by n points relative to the current position inside the current bounding box.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#move_up-instance_method" title="#move_up (instance method)">#<strong>move_up</strong>(amount)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Moves up the document by n points relative to the current position inside the current bounding box.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#number_pages-instance_method" title="#number_pages (instance method)">#<strong>number_pages</strong>(string, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Places a text box on specified pages for page numbering.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#outline-instance_method" title="#outline (instance method)">#<strong>outline</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Lazily instantiates a Prawn::Outline object for document.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pad-instance_method" title="#pad (instance method)">#<strong>pad</strong>(y)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Moves down the document by y, executes a block, then moves down the document by y again.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pad_bottom-instance_method" title="#pad_bottom (instance method)">#<strong>pad_bottom</strong>(y)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Executes a block then moves down the document.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pad_top-instance_method" title="#pad_top (instance method)">#<strong>pad_top</strong>(y)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Moves down the document and then executes a block.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#page_count-instance_method" title="#page_count (instance method)">#<strong>page_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the number of pages in the document.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#render-instance_method" title="#render (instance method)">#<strong>render</strong>(*arguments, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Renders the PDF document to string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#render_file-instance_method" title="#render_file (instance method)">#<strong>render_file</strong>(filename)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Renders the PDF document to file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#span-instance_method" title="#span (instance method)">#<strong>span</strong>(width, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A span is a special purpose bounding box that allows a column of elements to be positioned relative to the margin_box.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_new_page-instance_method" title="#start_new_page (instance method)">#<strong>start_new_page</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates and advances to a new page in the document.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#width_of-instance_method" title="#width_of (instance method)">#<strong>width_of</strong>(string, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the width of the given string using the given font.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Experimental API
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#column_box-instance_method" title="#column_box (instance method)">#<strong>column_box</strong>(*args, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A column box is a bounding box with the additional property that when text flows past the bottom, it will wrap first to another column on the same page, and only flow to the next page when all the columns are filled.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#define_grid-instance_method" title="#define_grid (instance method)">#<strong>define_grid</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Defines the grid system for a particular document.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#font_registry-instance_method" title="#font_registry (instance method)">#<strong>font_registry</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Hash of Font objects keyed by names.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#grid-instance_method" title="#grid (instance method)">#<strong>grid</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A method that can either be used to access a particular grid on the page or work with the grid system directly.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#page_match%3F-instance_method" title="#page_match? (instance method)">#<strong>page_match?</strong>(page_filter, page_number)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provides a way to execute a block of code repeatedly based on a page_filter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#repeat-instance_method" title="#repeat (instance method)">#<strong>repeat</strong>(page_filter, options = {}, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provides a way to execute a block of code repeatedly based on a page_filter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_font-instance_method" title="#save_font (instance method)">#<strong>save_font</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Saves the current font, and then yields.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_font-instance_method" title="#set_font (instance method)">#<strong>set_font</strong>(font, size = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the font directly, given an actual Font object and size.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Extension API
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#extensions-class_method" title="extensions (class method)">.<strong>extensions</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Any module added to this array will be included into instances of Prawn::Document at the per-object level.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize_first_page-instance_method" title="#initialize_first_page (instance method)">#<strong>initialize_first_page</strong>(options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="TransformationStack.html" title="Prawn::TransformationStack (module)">TransformationStack</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="TransformationStack.html#add_to_transformation_stack-instance_method" title="Prawn::TransformationStack#add_to_transformation_stack (method)">#add_to_transformation_stack</a></span>, <span class='object_link'><a href="TransformationStack.html#current_transformation_matrix_with_translation-instance_method" title="Prawn::TransformationStack#current_transformation_matrix_with_translation (method)">#current_transformation_matrix_with_translation</a></span>, <span class='object_link'><a href="TransformationStack.html#restore_transformation_stack-instance_method" title="Prawn::TransformationStack#restore_transformation_stack (method)">#restore_transformation_stack</a></span>, <span class='object_link'><a href="TransformationStack.html#save_transformation_stack-instance_method" title="Prawn::TransformationStack#save_transformation_stack (method)">#save_transformation_stack</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="SoftMask.html" title="Prawn::SoftMask (module)">SoftMask</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SoftMask.html#soft_mask-instance_method" title="Prawn::SoftMask#soft_mask (method)">#soft_mask</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Stamp.html" title="Prawn::Stamp (module)">Stamp</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Stamp.html#create_stamp-instance_method" title="Prawn::Stamp#create_stamp (method)">#create_stamp</a></span>, <span class='object_link'><a href="Stamp.html#stamp-instance_method" title="Prawn::Stamp#stamp (method)">#stamp</a></span>, <span class='object_link'><a href="Stamp.html#stamp_at-instance_method" title="Prawn::Stamp#stamp_at (method)">#stamp_at</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Images.html" title="Prawn::Images (module)">Images</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Images.html#image-instance_method" title="Prawn::Images#image (method)">#image</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Graphics.html" title="Prawn::Graphics (module)">Graphics</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics.html#circle-instance_method" title="Prawn::Graphics#circle (method)">#circle</a></span>, <span class='object_link'><a href="Graphics.html#close_and_stroke-instance_method" title="Prawn::Graphics#close_and_stroke (method)">#close_and_stroke</a></span>, <span class='object_link'><a href="Graphics.html#close_path-instance_method" title="Prawn::Graphics#close_path (method)">#close_path</a></span>, <span class='object_link'><a href="Graphics.html#curve-instance_method" title="Prawn::Graphics#curve (method)">#curve</a></span>, <span class='object_link'><a href="Graphics.html#curve_to-instance_method" title="Prawn::Graphics#curve_to (method)">#curve_to</a></span>, <span class='object_link'><a href="Graphics.html#ellipse-instance_method" title="Prawn::Graphics#ellipse (method)">#ellipse</a></span>, <span class='object_link'><a href="Graphics.html#fill-instance_method" title="Prawn::Graphics#fill (method)">#fill</a></span>, <span class='object_link'><a href="Graphics.html#fill_and_stroke-instance_method" title="Prawn::Graphics#fill_and_stroke (method)">#fill_and_stroke</a></span>, <span class='object_link'><a href="Graphics.html#horizontal_line-instance_method" title="Prawn::Graphics#horizontal_line (method)">#horizontal_line</a></span>, <span class='object_link'><a href="Graphics.html#horizontal_rule-instance_method" title="Prawn::Graphics#horizontal_rule (method)">#horizontal_rule</a></span>, <span class='object_link'><a href="Graphics.html#line-instance_method" title="Prawn::Graphics#line (method)">#line</a></span>, <span class='object_link'><a href="Graphics.html#line_to-instance_method" title="Prawn::Graphics#line_to (method)">#line_to</a></span>, <span class='object_link'><a href="Graphics.html#line_width-instance_method" title="Prawn::Graphics#line_width (method)">#line_width</a></span>, <span class='object_link'><a href="Graphics.html#line_width=-instance_method" title="Prawn::Graphics#line_width= (method)">#line_width=</a></span>, <span class='object_link'><a href="Graphics.html#move_to-instance_method" title="Prawn::Graphics#move_to (method)">#move_to</a></span>, <span class='object_link'><a href="Graphics.html#polygon-instance_method" title="Prawn::Graphics#polygon (method)">#polygon</a></span>, <span class='object_link'><a href="Graphics.html#rectangle-instance_method" title="Prawn::Graphics#rectangle (method)">#rectangle</a></span>, <span class='object_link'><a href="Graphics.html#rounded_polygon-instance_method" title="Prawn::Graphics#rounded_polygon (method)">#rounded_polygon</a></span>, <span class='object_link'><a href="Graphics.html#rounded_rectangle-instance_method" title="Prawn::Graphics#rounded_rectangle (method)">#rounded_rectangle</a></span>, <span class='object_link'><a href="Graphics.html#rounded_vertex-instance_method" title="Prawn::Graphics#rounded_vertex (method)">#rounded_vertex</a></span>, <span class='object_link'><a href="Graphics.html#stroke-instance_method" title="Prawn::Graphics#stroke (method)">#stroke</a></span>, <span class='object_link'><a href="Graphics.html#stroke_axis-instance_method" title="Prawn::Graphics#stroke_axis (method)">#stroke_axis</a></span>, <span class='object_link'><a href="Graphics.html#stroke_bounds-instance_method" title="Prawn::Graphics#stroke_bounds (method)">#stroke_bounds</a></span>, <span class='object_link'><a href="Graphics.html#vertical_line-instance_method" title="Prawn::Graphics#vertical_line (method)">#vertical_line</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Graphics/Patterns.html" title="Prawn::Graphics::Patterns (module)">Graphics::Patterns</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics/Patterns.html#fill_gradient-instance_method" title="Prawn::Graphics::Patterns#fill_gradient (method)">#fill_gradient</a></span>, <span class='object_link'><a href="Graphics/Patterns.html#stroke_gradient-instance_method" title="Prawn::Graphics::Patterns#stroke_gradient (method)">#stroke_gradient</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Graphics/Transformation.html" title="Prawn::Graphics::Transformation (module)">Graphics::Transformation</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics/Transformation.html#rotate-instance_method" title="Prawn::Graphics::Transformation#rotate (method)">#rotate</a></span>, <span class='object_link'><a href="Graphics/Transformation.html#scale-instance_method" title="Prawn::Graphics::Transformation#scale (method)">#scale</a></span>, <span class='object_link'><a href="Graphics/Transformation.html#transformation_matrix-instance_method" title="Prawn::Graphics::Transformation#transformation_matrix (method)">#transformation_matrix</a></span>, <span class='object_link'><a href="Graphics/Transformation.html#translate-instance_method" title="Prawn::Graphics::Transformation#translate (method)">#translate</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Graphics/Transparency.html" title="Prawn::Graphics::Transparency (module)">Graphics::Transparency</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics/Transparency.html#transparent-instance_method" title="Prawn::Graphics::Transparency#transparent (method)">#transparent</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Graphics/JoinStyle.html" title="Prawn::Graphics::JoinStyle (module)">Graphics::JoinStyle</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics/JoinStyle.html#join_style-instance_method" title="Prawn::Graphics::JoinStyle#join_style (method)">#join_style</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Graphics/CapStyle.html" title="Prawn::Graphics::CapStyle (module)">Graphics::CapStyle</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics/CapStyle.html#cap_style-instance_method" title="Prawn::Graphics::CapStyle#cap_style (method)">#cap_style</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Graphics/Dash.html" title="Prawn::Graphics::Dash (module)">Graphics::Dash</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics/Dash.html#dash-instance_method" title="Prawn::Graphics::Dash#dash (method)">#dash</a></span>, <span class='object_link'><a href="Graphics/Dash.html#dashed%3F-instance_method" title="Prawn::Graphics::Dash#dashed? (method)">#dashed?</a></span>, <span class='object_link'><a href="Graphics/Dash.html#undash-instance_method" title="Prawn::Graphics::Dash#undash (method)">#undash</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Graphics/Color.html" title="Prawn::Graphics::Color (module)">Graphics::Color</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics/Color.html#fill_color-instance_method" title="Prawn::Graphics::Color#fill_color (method)">#fill_color</a></span>, <span class='object_link'><a href="Graphics/Color.html#hex2rgb-class_method" title="Prawn::Graphics::Color.hex2rgb (method)">hex2rgb</a></span>, <span class='object_link'><a href="Graphics/Color.html#rgb2hex-class_method" title="Prawn::Graphics::Color.rgb2hex (method)">rgb2hex</a></span>, <span class='object_link'><a href="Graphics/Color.html#stroke_color-instance_method" title="Prawn::Graphics::Color#stroke_color (method)">#stroke_color</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Graphics/BlendMode.html" title="Prawn::Graphics::BlendMode (module)">Graphics::BlendMode</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Graphics/BlendMode.html#blend_mode-instance_method" title="Prawn::Graphics::BlendMode#blend_mode (method)">#blend_mode</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Text.html" title="Prawn::Text (module)">Text</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Text.html#draw_text-instance_method" title="Prawn::Text#draw_text (method)">#draw_text</a></span>, <span class='object_link'><a href="Text.html#draw_text!-instance_method" title="Prawn::Text#draw_text! (method)">#draw_text!</a></span>, <span class='object_link'><a href="Text.html#formatted_text-instance_method" title="Prawn::Text#formatted_text (method)">#formatted_text</a></span>, <span class='object_link'><a href="Text.html#height_of-instance_method" title="Prawn::Text#height_of (method)">#height_of</a></span>, <span class='object_link'><a href="Text.html#height_of_formatted-instance_method" title="Prawn::Text#height_of_formatted (method)">#height_of_formatted</a></span>, <span class='object_link'><a href="Text.html#text-instance_method" title="Prawn::Text#text (method)">#text</a></span>, <span class='object_link'><a href="Text.html#text_box-instance_method" title="Prawn::Text#text_box (method)">#text_box</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Text/Formatted.html" title="Prawn::Text::Formatted (module)">Text::Formatted</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Text/Formatted.html#formatted_text_box-instance_method" title="Prawn::Text::Formatted#formatted_text_box (method)">#formatted_text_box</a></span></p>

  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Document/Security.html" title="Prawn::Document::Security (module)">Security</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Document/Security.html#encrypt_document-instance_method" title="Prawn::Document::Security#encrypt_document (method)">#encrypt_document</a></span>, <span class='object_link'><a href="Document/Security.html#encrypt_string-class_method" title="Prawn::Document::Security.encrypt_string (method)">encrypt_string</a></span></p>

  
  
  
  
  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(options = {}, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new PDF Document.  The following options are available (with the default values marked in [])</p>
<dl class="rdoc-list note-list"><dt><code>:page_size</code>
<dd>
<p>One of the PDF::Core::PageGeometry sizes [LETTER]</p>
</dd><dt><code>:page_layout</code>
<dd>
<p>Either <code>:portrait</code> or <code>:landscape</code></p>
</dd><dt><code>:margin</code>
<dd>
<p>Sets the margin on all sides in points [0.5 inch]</p>
</dd><dt><code>:left_margin</code>
<dd>
<p>Sets the left margin in points [0.5 inch]</p>
</dd><dt><code>:right_margin</code>
<dd>
<p>Sets the right margin in points [0.5 inch]</p>
</dd><dt><code>:top_margin</code>
<dd>
<p>Sets the top margin in points [0.5 inch]</p>
</dd><dt><code>:bottom_margin</code>
<dd>
<p>Sets the bottom margin in points [0.5 inch]</p>
</dd><dt><code>:skip_page_creation</code>
<dd>
<p>Creates a document without starting the first page [false]</p>
</dd><dt><code>:compress</code>
<dd>
<p>Compresses content streams before rendering them</p>
<dl class="rdoc-list label-list"><dt>false
<dd></dd></dl>
</dd><dt><code>:background</code>
<dd>
<p>An image path to be used as background on all pages</p>
<dl class="rdoc-list label-list"><dt>nil
<dd></dd></dl>
</dd><dt><code>:background_scale</code>
<dd>
<p>Backgound image scale [1] [nil]</p>
</dd><dt><code>:info</code>
<dd>
<p>Generic hash allowing for custom metadata properties</p>
<dl class="rdoc-list label-list"><dt>nil
<dd></dd></dl>
</dd></dl>

<p><code>:text_formatter</code>: The text formatter to use for</p>

<pre class="code ruby"><code class="ruby">&lt;tt&gt;:inline_format&lt;/tt&gt;ted text
[Prawn::Text::Formatted::Parser]
</code></pre>

<p>Setting e.g. the :margin to 100 points and the :left_margin to 50 will result in margins of 100 points on every side except for the left, where it will be 50.</p>

<p>The :margin can also be an array much like CSS shorthand:</p>

<pre class="code ruby"><code class="ruby"># Top and bottom are 20, left and right are 100.
:margin =&gt; [20, 100]
# Top is 50, left and right are 100, bottom is 20.
:margin =&gt; [50, 100, 20]
# Top is 10, right is 20, bottom is 30, left is 40.
:margin =&gt; [10, 20, 30, 40]
</code></pre>

<p>Additionally, :page_size can be specified as a simple two value array giving the width and height of the document you need in PDF Points.</p>

<p>Usage:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># New document, US Letter paper, portrait orientation
</span><span class='id identifier rubyid_pdf'>pdf</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

<span class='comment'># New document, A4 paper, landscaped
</span><span class='id identifier rubyid_pdf'>pdf</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>page_size:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A4</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>page_layout:</span> <span class='symbol'>:landscape</span><span class='rparen'>)</span>

<span class='comment'># New document, Custom size
</span><span class='id identifier rubyid_pdf'>pdf</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>page_size:</span> <span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span> <span class='int'>300</span><span class='rbracket'>]</span><span class='rparen'>)</span>

<span class='comment'># New document, with background
</span><span class='id identifier rubyid_pdf'>pdf</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
  <span class='label'>background:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Prawn.html#DATADIR-constant" title="Prawn::DATADIR (constant)">DATADIR</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/images/pigs.jpg</span><span class='tstring_end'>&quot;</span></span>
<span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>

  <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='period'>.</span><span class='id identifier rubyid_verify_options'>verify_options</span> <span class='const'><span class='object_link'><a href="#VALID_OPTIONS-constant" title="Prawn::Document::VALID_OPTIONS (constant)">VALID_OPTIONS</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>

  <span class='comment'># need to fix, as the refactoring breaks this
</span>  <span class='comment'># raise NotImplementedError if options[:skip_page_creation]
</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_extensions'>extensions</span><span class='period'>.</span><span class='id identifier rubyid_reverse_each'>reverse_each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_extend'>extend</span> <span class='id identifier rubyid_e'>e</span> <span class='rbrace'>}</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='const'>PDF</span><span class='op'>::</span><span class='const'>Core</span><span class='op'>::</span><span class='const'>DocumentState</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_populate_pages_from_store'>populate_pages_from_store</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_renderer'>renderer</span><span class='period'>.</span><span class='id identifier rubyid_min_version'>min_version</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='period'>.</span><span class='id identifier rubyid_min_version'>min_version</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='period'>.</span><span class='id identifier rubyid_min_version'>min_version</span>

  <span class='id identifier rubyid_renderer'>renderer</span><span class='period'>.</span><span class='id identifier rubyid_min_version'>min_version</span><span class='lparen'>(</span><span class='float'>1.6</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:print_scaling</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:none</span>

  <span class='ivar'>@background</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:background</span><span class='rbracket'>]</span>
  <span class='ivar'>@background_scale</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:background_scale</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>1</span>
  <span class='ivar'>@font_size</span> <span class='op'>=</span> <span class='int'>12</span>

  <span class='ivar'>@bounding_box</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@margin_box</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='ivar'>@page_number</span> <span class='op'>=</span> <span class='int'>0</span>

  <span class='ivar'>@text_formatter</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:text_formatter</span><span class='rparen'>)</span> <span class='op'>||</span>
    <span class='const'><span class='object_link'><a href="Text.html" title="Prawn::Text (module)">Text</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Text/Formatted.html" title="Prawn::Text::Formatted (module)">Formatted</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Text/Formatted/Parser.html" title="Prawn::Text::Formatted::Parser (class)">Parser</a></span></span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:page_size</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:layout</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:page_layout</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_initialize_first_page'>initialize_first_page</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='ivar'>@bounding_box</span> <span class='op'>=</span> <span class='ivar'>@margin_box</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span> <span class='op'>&lt;</span> <span class='int'>1</span> <span class='op'>?</span> <span class='id identifier rubyid_instance_eval'>instance_eval</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_block'>block</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="margin_box=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="margin_box-instance_method">
  
    #<strong>margin_box</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute margin_box.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_margin_box'>margin_box</span>
  <span class='ivar'>@margin_box</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="margins-instance_method">
  
    #<strong>margins</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute margins.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_margins'>margins</span>
  <span class='ivar'>@margins</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="page_number=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="page_number-instance_method">
  
    #<strong>page_number</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute page_number.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_page_number'>page_number</span>
  <span class='ivar'>@page_number</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="text_formatter=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="text_formatter-instance_method">
  
    #<strong>text_formatter</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute text_formatter.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_text_formatter'>text_formatter</span>
  <span class='ivar'>@text_formatter</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="y=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="y-instance_method">
  
    #<strong>y</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute y.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_y'>y</span>
  <span class='ivar'>@y</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="extensions-class_method">
  
    .<strong>extensions</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Any module added to this array will be included into instances of Prawn::Document at the per-object level.  These will also be inherited by any subclasses.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>MyFancyModule</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_party!'>party!</span>
    <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>It&#39;s a big party!</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

<span class='kw'>end</span>

<span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_extensions'>extensions</span> <span class='op'>&lt;&lt;</span> <span class='const'>MyFancyModule</span>

<span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="#generate-class_method" title="Prawn::Document.generate (method)">generate</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo.pdf</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_party!'>party!</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 95</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_extensions'>extensions</span>
  <span class='ivar'>@extensions</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate-class_method">
  
    .<strong>generate</strong>(filename, options = {}, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates and renders a PDF document.</p>

<p>When using the implicit block form, Prawn will evaluate the block within an instance of Prawn::Document, simplifying your syntax. However, please note that you will not be able to reference variables from the enclosing scope within this block.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Using implicit block form and rendering to a file
</span><span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>example.pdf</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='comment'># self here is set to the newly instantiated Prawn::Document
</span>  <span class='comment'># and so any variables in the outside scope are unavailable
</span>  <span class='id identifier rubyid_font'>font</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Times-Roman</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_draw_text'>draw_text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:at</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>720</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:size</span> <span class='op'>=&gt;</span> <span class='int'>32</span>
<span class='kw'>end</span>
</code></pre>

<p>If you need to access your local and instance variables, use the explicit block form shown below.  In this case, Prawn yields an instance of PDF::Document and the block is an ordinary closure:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Using explicit block form and rendering to a file
</span><span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World</span><span class='tstring_end'>&quot;</span></span>
<span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>example.pdf</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pdf'>pdf</span><span class='op'>|</span>
  <span class='comment'># self here is left alone
</span>  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_font'>font</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Times-Roman</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_draw_text'>draw_text</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='symbol'>:at</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>720</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:size</span> <span class='op'>=&gt;</span> <span class='int'>32</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 143</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pdf'>pdf</span> <span class='op'>=</span> <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_render_file'>render_file</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="bounding_box-instance_method">
  
    #<strong>bounding_box</strong>(point, *args, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:call-seq:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bounding_box'>bounding_box</span><span class='lparen'>(</span><span class='id identifier rubyid_point'>point</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
</code></pre>

<p>A bounding box serves two important purposes:</p>
<ul><li>
<p>Provide bounds for flowing text, starting at a given point</p>
</li><li>
<p>Translate the origin (0,0) for graphics primitives</p>
</li></ul>

<p>A point and :width must be provided. :height is optional. (See stretchyness below)</p>

<h2 id="label-Positioning">Positioning</h2>

<p>Bounding boxes are positioned relative to their top left corner and the width measurement is towards the right and height measurement is downwards.</p>

<p>Usage:</p>
<ul><li>
<p>Bounding box 100pt x 100pt in the absolute bottom left of the containing box:</p>

<p><a href="0,100">pdf.bounding_box(</a>, :width =&gt; 100, :height =&gt; 100)</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_stroke_bounds'>stroke_bounds</span>
</code></pre>

<p>end</p>
</li><li>
<p>Bounding box 200pt x 400pt high in the center of the page:</p>

<p>x_pos = ((bounds.width / 2) - 150) y_pos = ((bounds.height / 2) + 200) pdf.bounding_box([x_pos, y_pos], :width =&gt; 300, :height =&gt; 400) do</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_stroke_bounds'>stroke_bounds</span>
</code></pre>

<p>end</p>
</li></ul>

<h2 id="label-Flowing+Text">Flowing Text</h2>

<p>When flowing text, the usage of a bounding box is simple. Text will begin at the point specified, flowing the width of the bounding box. After the block exits, the cursor position will be moved to the bottom of the bounding box (y - height). If flowing text exceeds the height of the bounding box, the text will be continued on the next page, starting again at the top-left corner of the bounding box.</p>

<p>Usage:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_bounding_box'>bounding_box</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>100</span><span class='comma'>,</span><span class='int'>500</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:width</span> <span class='op'>=&gt;</span> <span class='int'>100</span><span class='comma'>,</span> <span class='symbol'>:height</span> <span class='op'>=&gt;</span> <span class='int'>300</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This text will flow in a very narrow box starting</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>from [100,500]. The pointer will then be moved to [100,200]</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>and return to the margin_box</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>Note, this is a low level tool and is designed primarily for building other abstractions.  If you just need to flow text on the page, you will want to look at span() and text_box() instead</p>

<h2 id="label-Translating+Coordinates">Translating Coordinates</h2>

<p>When translating coordinates, the idea is to allow the user to draw relative to the origin, and then translate their drawing to a specified area of the document, rather than adjust all their drawing coordinates to match this new region.</p>

<p>Take for example two triangles which share one point, drawn from the origin:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_polygon'>polygon</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>250</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>150</span><span class='comma'>,</span><span class='int'>100</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_polygon'>polygon</span> <span class='lbracket'>[</span><span class='int'>100</span><span class='comma'>,</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>150</span><span class='comma'>,</span><span class='int'>100</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>0</span><span class='rbracket'>]</span>
</code></pre>

<p>It would be easy enough to translate these triangles to another point, e.g [200,200]</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_polygon'>polygon</span> <span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>450</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>200</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>350</span><span class='comma'>,</span><span class='int'>300</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_polygon'>polygon</span> <span class='lbracket'>[</span><span class='int'>300</span><span class='comma'>,</span><span class='int'>200</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>350</span><span class='comma'>,</span><span class='int'>300</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>400</span><span class='comma'>,</span><span class='int'>200</span><span class='rbracket'>]</span>
</code></pre>

<p>However, each time you want to move the drawing, you&#39;d need to alter every point in the drawing calls, which as you might imagine, can become tedious.</p>

<p>If instead, we think of the drawing as being bounded by a box, we can see that the image is 200 points wide by 250 points tall.</p>

<p>To translate it to a new origin, we simply select a point at (x,y+height)</p>

<p>Using the [200,200] example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_bounding_box'>bounding_box</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>450</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:width</span> <span class='op'>=&gt;</span> <span class='int'>200</span><span class='comma'>,</span> <span class='symbol'>:height</span> <span class='op'>=&gt;</span> <span class='int'>250</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_stroke'>stroke</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_polygon'>polygon</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>250</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>150</span><span class='comma'>,</span><span class='int'>100</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_polygon'>polygon</span> <span class='lbracket'>[</span><span class='int'>100</span><span class='comma'>,</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>150</span><span class='comma'>,</span><span class='int'>100</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>Notice that the drawing is still relative to the origin. If we want to move this drawing around the document, we simply need to recalculate the top-left corner of the rectangular bounding-box, and all of our graphics calls remain unmodified.</p>

<h2 id="label-Nesting+Bounding+Boxes">Nesting Bounding Boxes</h2>

<p>At the top level, bounding boxes are specified relative to the document&#39;s margin_box (which is itself a bounding box).  You can also nest bounding boxes, allowing you to build components which are relative to each other</p>

<p>Usage:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_bounding_box'>bounding_box</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>450</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:width</span> <span class='op'>=&gt;</span> <span class='int'>200</span><span class='comma'>,</span> <span class='symbol'>:height</span> <span class='op'>=&gt;</span> <span class='int'>250</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_stroke_bounds'>stroke_bounds</span>   <span class='comment'># Show the containing bounding box
</span>  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_bounding_box'>bounding_box</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>50</span><span class='comma'>,</span><span class='int'>200</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:width</span> <span class='op'>=&gt;</span> <span class='int'>50</span><span class='comma'>,</span> <span class='symbol'>:height</span> <span class='op'>=&gt;</span> <span class='int'>50</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'># a 50x50 bounding box that starts 50 pixels left and 50 pixels down
</span>    <span class='comment'># the parent bounding box.
</span>    <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_stroke_bounds'>stroke_bounds</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h2 id="label-Stretchyness">Stretchyness</h2>

<p>If you do not specify a height to a bounding box, it will become stretchy and its height will be calculated automatically as you stretch the box downwards.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_bounding_box'>bounding_box</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>100</span><span class='comma'>,</span><span class='int'>400</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:width</span> <span class='op'>=&gt;</span> <span class='int'>400</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The height of this box is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_height'>height</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>this is some text</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>this is some more text</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>and finally a bit more</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Now the height of this box is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_height'>height</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</code></pre>

<h2 id="label-Absolute+Positioning">Absolute Positioning</h2>

<p>If you wish to position the bounding boxes at absolute coordinates rather than relative to the margins or other bounding boxes, you can use canvas()</p>

<pre class="code ruby"><code class="ruby">pdf.bounding_box([50,500], :width =&gt; 200, :height =&gt; 300) do
  pdf.stroke_bounds
  pdf.canvas do
    Positioned outside the containing box at the &#39;real&#39; (300,450)
    pdf.bounding_box([300,450], :width =&gt; 200, :height =&gt; 200) do
      pdf.stroke_bounds
    end
  end
end
</code></pre>

<p>Of course, if you use canvas, you will be responsible for ensuring that you remain within the printable area of your document.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160
161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document/bounding_box.rb', line 158</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bounding_box'>bounding_box</span><span class='lparen'>(</span><span class='id identifier rubyid_point'>point</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_init_bounding_box'>init_bounding_box</span><span class='lparen'>(</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_parent_box'>parent_box</span><span class='op'>|</span>
    <span class='id identifier rubyid_point'>point</span> <span class='op'>=</span> <span class='id identifier rubyid_map_to_absolute'>map_to_absolute</span><span class='lparen'>(</span><span class='id identifier rubyid_point'>point</span><span class='rparen'>)</span>
    <span class='ivar'>@bounding_box</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Document/BoundingBox.html" title="Prawn::Document::BoundingBox (class)">BoundingBox</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_parent_box'>parent_box</span><span class='comma'>,</span> <span class='id identifier rubyid_point'>point</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bounds-instance_method">
  
    #<strong>bounds</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The bounds method returns the current bounding box you are currently in, which is by default the box represented by the margin box on the document itself.  When called from within a created <code>bounding_box</code> block, the box defined by that call will be returned instead of the document margin box.</p>

<p>Another important point about bounding boxes is that all x and y measurements within a bounding box code block are relative to the bottom left corner of the bounding box.</p>

<p>For example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Prawn::Document#initialize (method)">new</a></span></span> <span class='kw'>do</span>
  <span class='comment'># In the default &quot;margin box&quot; of a Prawn document of 0.5in along each
</span>  <span class='comment'># edge
</span>
  <span class='comment'># Draw a border around the page (the manual way)
</span>  <span class='id identifier rubyid_stroke'>stroke</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_line'>line</span><span class='lparen'>(</span><span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_bottom_left'>bottom_left</span><span class='comma'>,</span> <span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_bottom_right'>bottom_right</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_line'>line</span><span class='lparen'>(</span><span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_bottom_right'>bottom_right</span><span class='comma'>,</span> <span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_top_right'>top_right</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_line'>line</span><span class='lparen'>(</span><span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_top_right'>top_right</span><span class='comma'>,</span> <span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_top_left'>top_left</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_line'>line</span><span class='lparen'>(</span><span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_top_left'>top_left</span><span class='comma'>,</span> <span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_bottom_left'>bottom_left</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Draw a border around the page (the easy way)
</span>  <span class='id identifier rubyid_stroke_bounds'>stroke_bounds</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


439
440
441</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 439</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bounds'>bounds</span>
  <span class='ivar'>@bounding_box</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bounds=-instance_method">
  
    #<strong>bounds=</strong>(bounding_box)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets Document#bounds to the BoundingBox provided.  See above for a brief description of what a bounding box is.  This function is useful if you really need to change the bounding box manually, but usually, just entering and exiting bounding box code blocks is good enough.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


455
456
457</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 455</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bounds='>bounds=</span><span class='lparen'>(</span><span class='id identifier rubyid_bounding_box'>bounding_box</span><span class='rparen'>)</span>
  <span class='ivar'>@bounding_box</span> <span class='op'>=</span> <span class='id identifier rubyid_bounding_box'>bounding_box</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="canvas-instance_method">
  
    #<strong>canvas</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A shortcut to produce a bounding box which is mapped to the document&#39;s absolute coordinates, regardless of how things are nested or margin sizes.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_canvas'>canvas</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_line'>line</span> <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_bottom_left'>bottom_left</span><span class='comma'>,</span> <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_top_right'>top_right</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174
175
176
177
178
179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document/bounding_box.rb', line 172</span>

<span class='kw'>def</span> <span class='id identifier rubyid_canvas'>canvas</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_init_bounding_box'>init_bounding_box</span><span class='lparen'>(</span><span class='id identifier rubyid_block'>block</span><span class='comma'>,</span> <span class='label'>hold_position:</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='op'>|</span>
    <span class='comment'># Canvas bbox acts like margin_box in that its parent bounds are unset.
</span>    <span class='ivar'>@bounding_box</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Document/BoundingBox.html" title="Prawn::Document::BoundingBox (class)">BoundingBox</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
      <span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_dimensions'>dimensions</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='label'>width:</span> <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_dimensions'>dimensions</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='label'>height:</span> <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_dimensions'>dimensions</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="column_box-instance_method">
  
    #<strong>column_box</strong>(*args, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A column box is a bounding box with the additional property that when text flows past the bottom, it will wrap first to another column on the same page, and only flow to the next page when all the columns are filled.</p>

<p>column_box accepts the same parameters as bounding_box, as well as the number of :columns and a :spacer (in points) between columns. If resetting the top margin is desired on a new page (e.g. to allow for initial page wide column titles) the option :reflow_margins =&gt; true can be set.</p>

<p>Defaults are :columns = 3, :spacer = font_size, and :reflow_margins =&gt; false</p>

<p>Under PDF::Writer, “spacer” was known as “gutter”</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32
33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document/column_box.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_column_box'>column_box</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_init_column_box'>init_column_box</span><span class='lparen'>(</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_parent_box'>parent_box</span><span class='op'>|</span>
    <span class='id identifier rubyid_map_to_absolute!'>map_to_absolute!</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='ivar'>@bounding_box</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Document/ColumnBox.html" title="Prawn::Document::ColumnBox (class)">ColumnBox</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Document/ColumnBox.html#initialize-instance_method" title="Prawn::Document::ColumnBox#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_parent_box'>parent_box</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cursor-instance_method">
  
    #<strong>cursor</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The current y drawing position relative to the innermost bounding box, or to the page margins at the top level.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


360
361
362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 360</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cursor'>cursor</span>
  <span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_absolute_bottom'>absolute_bottom</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="define_grid-instance_method">
  
    #<strong>define_grid</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Defines the grid system for a particular document.  Takes the number of rows and columns and the width to use for the gutter as the keys :rows, :columns, :gutter, :row_gutter, :column_gutter</p>

<p>Note that a completely new grid object is built each time define_grid() is called. This means that all subsequent calls to grid() will use the newly defined Grid object – grids are not nestable like bounding boxes are.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/grid.rb', line 22</span>

<span class='kw'>def</span> <span class='id identifier rubyid_define_grid'>define_grid</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@boxes</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@grid</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Document/Grid.html" title="Prawn::Document::Grid (class)">Grid</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Document/Grid.html#initialize-instance_method" title="Prawn::Document::Grid#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_page-instance_method">
  
    #<strong>delete_page</strong>(index)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Remove page of the document by index</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Prawn::Document#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_page_count'>page_count</span> <span class='comment'>#=&gt; 1
</span><span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_start_new_page'>start_new_page</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_page_count'>page_count</span> <span class='comment'>#=&gt; 4
</span><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_delete_page'>delete_page</span><span class='lparen'>(</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_page_count'>page_count</span> <span class='comment'>#=&gt; 3
</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


318
319
320
321
322
323
324
325
326
327</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 318</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_page'>delete_page</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_index'>index</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span> <span class='op'>&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_pages'>pages</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_pages'>pages</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='period'>.</span><span class='id identifier rubyid_pages'>pages</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:Kids</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='period'>.</span><span class='id identifier rubyid_pages'>pages</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:Count</span><span class='rbracket'>]</span> <span class='op'>-=</span> <span class='int'>1</span>
  <span class='ivar'>@page_number</span> <span class='op'>-=</span> <span class='int'>1</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="float-instance_method">
  
    #<strong>float</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Executes a block and then restores the original y position. If new pages were created during this block, it will teleport back to the original page when done.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_float'>float</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_move_down'>move_down</span> <span class='int'>100</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>B</span><span class='tstring_end'>&quot;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


383
384
385
386
387
388
389</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 383</span>

<span class='kw'>def</span> <span class='id identifier rubyid_float'>float</span>
  <span class='id identifier rubyid_original_page'>original_page</span> <span class='op'>=</span> <span class='id identifier rubyid_page_number'>page_number</span>
  <span class='id identifier rubyid_original_y'>original_y</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span>
  <span class='kw'>yield</span>
  <span class='id identifier rubyid_go_to_page'>go_to_page</span><span class='lparen'>(</span><span class='id identifier rubyid_original_page'>original_page</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_page_number'>page_number</span> <span class='op'>==</span> <span class='id identifier rubyid_original_page'>original_page</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='id identifier rubyid_original_y'>original_y</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="font-instance_method">
  
    #<strong>font</strong>(name = nil, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Without arguments, this returns the currently selected font. Otherwise, it sets the current font. When a block is used, the font is applied transactionally and is rolled back when the block exits.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="#generate-class_method" title="Prawn::Document.generate (method)">generate</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>font.pdf</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Default font is Helvetica</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_font'>font</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Times-Roman</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Now using Times-Roman</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_font'>font</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DejaVuSans.ttf</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Using TTF font from file DejaVuSans.ttf</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_font'>font</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Courier</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:style</span> <span class='op'>=&gt;</span> <span class='symbol'>:bold</span>
    <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You see this in bold Courier</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Times-Roman, again</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>The :name parameter must be a string. It can be one of the 14 built-in fonts supported by PDF, or the location of a TTF file. The Fonts::AFM::BUILT_INS array specifies the valid built in font values.</p>

<p>If a ttf font is specified, the glyphs necessary to render your document will be embedded in the rendered PDF. This should be your preferred option in most cases. It will increase the size of the resulting file, but also make it more portable.</p>

<p>The options parameter is an optional hash providing size and style. To use the :style option you need to map those font styles to their respective font files. See font_families for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/font.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_font'>font</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>return</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@font</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@font</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_font'>font</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Helvetica</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_pages'>pages</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_in_stamp_stream?'>in_stamp_stream?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Errors.html" title="Prawn::Errors (module)">Errors</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Errors.html#NotOnPage-constant" title="Prawn::Errors::NotOnPage (constant)">NotOnPage</a></span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_new_font'>new_font</span> <span class='op'>=</span> <span class='id identifier rubyid_find_font'>find_font</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_save_font'>save_font</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_set_font'>set_font</span><span class='lparen'>(</span><span class='id identifier rubyid_new_font'>new_font</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>yield</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_set_font'>set_font</span><span class='lparen'>(</span><span class='id identifier rubyid_new_font'>new_font</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='ivar'>@font</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="font_families-instance_method">
  
    #<strong>font_families</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Hash that maps font family names to their styled individual font names.</p>

<p>To add support for another font family, append to this hash, e.g:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_font_families'>font_families</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MyTrueTypeFamily</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:bold</span>        <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo-bold.ttf</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                         <span class='symbol'>:italic</span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo-italic.ttf</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                         <span class='symbol'>:bold_italic</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo-bold-italic.ttf</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                         <span class='symbol'>:normal</span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo.ttf</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='rparen'>)</span>
</code></pre>

<p>This will then allow you to use the fonts like so:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_font'>font</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MyTrueTypeFamily</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:style</span> <span class='op'>=&gt;</span> <span class='symbol'>:bold</span><span class='rparen'>)</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Some bold text</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_font'>font</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MyTrueTypeFamily</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Some normal text</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>This assumes that you have appropriate TTF fonts for each style you wish to support.</p>

<p>By default the styles :bold, :italic, :bold_italic, and :normal are defined for fonts “Courier”, “Times-Roman” and “Helvetica”. When defining your own font families, you can map any or all of these styles to whatever font files you&#39;d like.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/font.rb', line 171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_font_families'>font_families</span>
  <span class='ivar'>@font_families</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Courier</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>bold:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Courier-Bold</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>italic:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Courier-Oblique</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>bold_italic:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Courier-BoldOblique</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>normal:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Courier</span><span class='tstring_end'>&#39;</span></span>
    <span class='rbrace'>}</span><span class='comma'>,</span>

    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Times-Roman</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>bold:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Times-Bold</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>italic:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Times-Italic</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>bold_italic:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Times-BoldItalic</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>normal:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Times-Roman</span><span class='tstring_end'>&#39;</span></span>
    <span class='rbrace'>}</span><span class='comma'>,</span>

    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Helvetica</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>bold:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Helvetica-Bold</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>italic:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Helvetica-Oblique</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>bold_italic:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Helvetica-BoldOblique</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>normal:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Helvetica</span><span class='tstring_end'>&#39;</span></span>
    <span class='rbrace'>}</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="font_registry-instance_method">
  
    #<strong>font_registry</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Hash of Font objects keyed by names</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/font.rb', line 258</span>

<span class='kw'>def</span> <span class='id identifier rubyid_font_registry'>font_registry</span> <span class='comment'>#:nodoc:
</span>  <span class='ivar'>@font_registry</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="font_size-instance_method">
  
    #<strong>font_size</strong>(points = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>When called with no argument, returns the current font size.</p>

<p>When called with a single argument but no block, sets the current font size.  When a block is used, the font size is applied transactionally and is rolled back when the block exits.  You may still change the font size within a transactional block for individual text segments, or nested calls to font_size.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="#generate-class_method" title="Prawn::Document.generate (method)">generate</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>font_size.pdf</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_font_size'>font_size</span> <span class='int'>16</span>
  <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>At size 16</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_font_size'>font_size</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>At size 10</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>At size 6</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:size</span> <span class='op'>=&gt;</span> <span class='int'>6</span>
    <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>At size 10</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>At size 16</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>When called without an argument, this method returns the current font size.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97
98
99
100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/font.rb', line 95</span>

<span class='kw'>def</span> <span class='id identifier rubyid_font_size'>font_size</span><span class='lparen'>(</span><span class='id identifier rubyid_points'>points</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='ivar'>@font_size</span> <span class='kw'>unless</span> <span class='id identifier rubyid_points'>points</span>

  <span class='id identifier rubyid_size_before_yield'>size_before_yield</span> <span class='op'>=</span> <span class='ivar'>@font_size</span>
  <span class='ivar'>@font_size</span> <span class='op'>=</span> <span class='id identifier rubyid_points'>points</span>
  <span class='id identifier rubyid_block_given?'>block_given?</span> <span class='op'>?</span> <span class='kw'>yield</span> <span class='op'>:</span> <span class='kw'>return</span>
  <span class='ivar'>@font_size</span> <span class='op'>=</span> <span class='id identifier rubyid_size_before_yield'>size_before_yield</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="font_size=-instance_method">
  
    #<strong>font_size=</strong>(size)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the font size</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/font.rb', line 105</span>

<span class='kw'>def</span> <span class='id identifier rubyid_font_size='>font_size=</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_font_size'>font_size</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="go_to_page-instance_method">
  
    #<strong>go_to_page</strong>(page_number)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Re-opens the page with the given (1-based) page number so that you can draw on it.</p>

<p>See Prawn::Document#number_pages for a sample usage of this capability.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


345
346
347
348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 345</span>

<span class='kw'>def</span> <span class='id identifier rubyid_go_to_page'>go_to_page</span><span class='lparen'>(</span><span class='id identifier rubyid_page_number'>page_number</span><span class='rparen'>)</span>
  <span class='ivar'>@page_number</span> <span class='op'>=</span> <span class='id identifier rubyid_page_number'>page_number</span>
  <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_page'>page</span> <span class='op'>=</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_pages'>pages</span><span class='lbracket'>[</span><span class='id identifier rubyid_page_number'>page_number</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_generate_margin_box'>generate_margin_box</span>
  <span class='ivar'>@y</span> <span class='op'>=</span> <span class='ivar'>@bounding_box</span><span class='period'>.</span><span class='id identifier rubyid_absolute_top'>absolute_top</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="grid-instance_method">
  
    #<strong>grid</strong>(*args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A method that can either be used to access a particular grid on the page or work with the grid system directly.</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@pdf</span><span class='period'>.</span><span class='id identifier rubyid_grid'>grid</span>                 <span class='comment'># Get the Grid directly
</span><span class='ivar'>@pdf</span><span class='period'>.</span><span class='id identifier rubyid_grid'>grid</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>          <span class='comment'># Get the GridBox at [0,1]
</span><span class='ivar'>@pdf</span><span class='period'>.</span><span class='id identifier rubyid_grid'>grid</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span>   <span class='comment'># Get a multi-box spanning from [0,1] to [1,2]
</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/grid.rb', line 34</span>

<span class='kw'>def</span> <span class='id identifier rubyid_grid'>grid</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='ivar'>@boxes</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@boxes</span><span class='lbracket'>[</span><span class='id identifier rubyid_args'>args</span><span class='rbracket'>]</span> <span class='op'>||=</span>
    <span class='kw'>begin</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='ivar'>@grid</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_g1'>g1</span><span class='comma'>,</span> <span class='id identifier rubyid_g2'>g2</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_g1'>g1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_g2'>g2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
            <span class='id identifier rubyid_g1'>g1</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>2</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_g2'>g2</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>2</span>
          <span class='id identifier rubyid_multi_box'>multi_box</span><span class='lparen'>(</span><span class='id identifier rubyid_single_box'>single_box</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_g1'>g1</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_single_box'>single_box</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_g2'>g2</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_single_box'>single_box</span><span class='lparen'>(</span><span class='id identifier rubyid_g1'>g1</span><span class='comma'>,</span> <span class='id identifier rubyid_g2'>g2</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="indent-instance_method">
  
    #<strong>indent</strong>(left, right = 0, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Indents the specified number of PDF points for the duration of the block</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>some text</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_indent'>indent</span><span class='lparen'>(</span><span class='int'>20</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is indented 20 points</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This starts 20 points left of the above line </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>and is flush with the first line</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_indent'>indent</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>20</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This line is indented on both sides.</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


526
527
528</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 526</span>

<span class='kw'>def</span> <span class='id identifier rubyid_indent'>indent</span><span class='lparen'>(</span><span class='id identifier rubyid_left'>left</span><span class='comma'>,</span> <span class='id identifier rubyid_right'>right</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_indent'>indent</span><span class='lparen'>(</span><span class='id identifier rubyid_left'>left</span><span class='comma'>,</span> <span class='id identifier rubyid_right'>right</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="initialize_first_page-instance_method">
  
    #<strong>initialize_first_page</strong>(options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


678
679
680
681
682
683
684</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 678</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize_first_page'>initialize_first_page</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:skip_page_creation</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_start_new_page'>start_new_page</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>orphan:</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_start_new_page'>start_new_page</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="move_cursor_to-instance_method">
  
    #<strong>move_cursor_to</strong>(new_y)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Moves to the specified y position in relative terms to the bottom margin.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


366
367
368</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 366</span>

<span class='kw'>def</span> <span class='id identifier rubyid_move_cursor_to'>move_cursor_to</span><span class='lparen'>(</span><span class='id identifier rubyid_new_y'>new_y</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='id identifier rubyid_new_y'>new_y</span> <span class='op'>+</span> <span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_absolute_bottom'>absolute_bottom</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="move_down-instance_method">
  
    #<strong>move_down</strong>(amount)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Moves down the document by n points relative to the current position inside the current bounding box.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


469
470
471</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 469</span>

<span class='kw'>def</span> <span class='id identifier rubyid_move_down'>move_down</span><span class='lparen'>(</span><span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span> <span class='op'>-=</span> <span class='id identifier rubyid_amount'>amount</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="move_up-instance_method">
  
    #<strong>move_up</strong>(amount)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Moves up the document by n points relative to the current position inside the current bounding box.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


462
463
464</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 462</span>

<span class='kw'>def</span> <span class='id identifier rubyid_move_up'>move_up</span><span class='lparen'>(</span><span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span> <span class='op'>+=</span> <span class='id identifier rubyid_amount'>amount</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="number_pages-instance_method">
  
    #<strong>number_pages</strong>(string, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Places a text box on specified pages for page numbering.  This should be called towards the end of document creation, after all your content is already in place.  In your template string, &lt;page&gt; refers to the current page, and &lt;total&gt; refers to the total amount of pages in the document. Page numbering should occur at the end of your Prawn::Document.generate block because the method iterates through existing pages after they are created.</p>

<p>Parameters are:</p>
<dl class="rdoc-list note-list"><dt><code>string</code>
<dd>
<p>Template string for page number wording. Should include &#39;&lt;page&gt;&#39; and, optionally, &#39;&lt;total&gt;&#39;.</p>
</dd><dt><code>options</code>
<dd>
<p>A hash for page numbering and text box options.</p>
</dd><dt><code>:page_filter</code>
<dd>
<p>A filter to specify which pages to place page numbers on. Refer to the method &#39;page_match?&#39;</p>
</dd><dt><code>:start_count_at</code>
<dd>
<p>The starting count to increment pages from.</p>
</dd><dt><code>:total_pages</code>
<dd>
<p>If provided, will replace &lt;total&gt; with the value given. Useful to override the total number of pages when using the start_count_at option.</p>
</dd><dt><code>:color</code>
<dd>
<p>Text fill color.</p>
</dd></dl>

<pre class="code ruby"><code class="ruby">Please refer to Prawn::Text::text_box for additional options
concerning text formatting and placement.
</code></pre>

<p>Example:</p>

<pre class="code ruby"><code class="ruby">Print page numbers on every page except for the first. Start counting
from five.

  Prawn::Document.generate(&quot;page_with_numbering.pdf&quot;) do
    number_pages &quot;&lt;page&gt; in a total of &lt;total&gt;&quot;, {
      start_count_at: 5,
      page_filter: lambda { |pg| pg != 1 },
      at: [bounds.right - 50, 0],
      align: :right,
      size: 14
    }
  end
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 569</span>

<span class='kw'>def</span> <span class='id identifier rubyid_number_pages'>number_pages</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_start_count_at'>start_count_at</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:start_count_at</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

  <span class='id identifier rubyid_page_filter'>page_filter</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:page_filter</span><span class='rparen'>)</span>
                  <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:page_filter</span><span class='rparen'>)</span>
                <span class='kw'>else</span>
                  <span class='symbol'>:all</span>
                <span class='kw'>end</span>

  <span class='id identifier rubyid_total_pages'>total_pages</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:total_pages</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_txtcolor'>txtcolor</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:color</span><span class='rparen'>)</span>
  <span class='comment'># An explicit height so that we can draw page numbers in the margins
</span>  <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:height</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='int'>50</span> <span class='kw'>unless</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:height</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_start_count'>start_count</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_pseudopage'>pseudopage</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_page_count'>page_count</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_start_count'>start_count</span>
      <span class='id identifier rubyid_pseudopage'>pseudopage</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_start_count_at'>start_count_at</span>
                   <span class='kw'>when</span> <span class='int'>0</span>
                     <span class='int'>1</span>
                   <span class='kw'>else</span>
                     <span class='id identifier rubyid_start_count_at'>start_count_at</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
                   <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_page_match?'>page_match?</span><span class='lparen'>(</span><span class='id identifier rubyid_page_filter'>page_filter</span><span class='comma'>,</span> <span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_go_to_page'>go_to_page</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span>
      <span class='comment'># have to use fill_color here otherwise text reverts back to default
</span>      <span class='comment'># fill color
</span>      <span class='id identifier rubyid_fill_color'>fill_color</span> <span class='id identifier rubyid_txtcolor'>txtcolor</span> <span class='kw'>unless</span> <span class='id identifier rubyid_txtcolor'>txtcolor</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_total_pages'>total_pages</span> <span class='op'>=</span> <span class='id identifier rubyid_total_pages'>total_pages</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='id identifier rubyid_page_count'>page_count</span> <span class='op'>:</span> <span class='id identifier rubyid_total_pages'>total_pages</span>
      <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;page&gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_pseudopage'>pseudopage</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
        <span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;total&gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_total_pages'>total_pages</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_text_box'>text_box</span> <span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>
      <span class='id identifier rubyid_start_count'>start_count</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='comment'># increment page count as soon as first match found
</span>    <span class='kw'>end</span>
    <span class='id identifier rubyid_pseudopage'>pseudopage</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_start_count'>start_count</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="outline-instance_method">
  
    #<strong>outline</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Lazily instantiates a Prawn::Outline object for document. This is used as point of entry to methods to build the outline tree for a document&#39;s table of contents.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/outline.rb', line 10</span>

<span class='kw'>def</span> <span class='id identifier rubyid_outline'>outline</span>
  <span class='ivar'>@outline</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="Outline.html" title="Prawn::Outline (class)">Outline</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Outline.html#initialize-instance_method" title="Prawn::Outline#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pad-instance_method">
  
    #<strong>pad</strong>(y)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Moves down the document by y, executes a block, then moves down the document by y again.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>some text</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_pad'>pad</span><span class='lparen'>(</span><span class='int'>100</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is 100 points below the previous line of text</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is 100 points below the previous line of text</span><span class='tstring_end'>&quot;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


508
509
510
511
512</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 508</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pad'>pad</span><span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_move_down'>move_down</span><span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span>
  <span class='kw'>yield</span>
  <span class='id identifier rubyid_move_down'>move_down</span><span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pad_bottom-instance_method">
  
    #<strong>pad_bottom</strong>(y)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Executes a block then moves down the document</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>some text</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_pad_bottom'>pad_bottom</span><span class='lparen'>(</span><span class='int'>100</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This text appears right below the previous line of text</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is 100 points below the previous line of text</span><span class='tstring_end'>&quot;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


494
495
496
497</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 494</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pad_bottom'>pad_bottom</span><span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span>
  <span class='kw'>yield</span>
  <span class='id identifier rubyid_move_down'>move_down</span><span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pad_top-instance_method">
  
    #<strong>pad_top</strong>(y)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Moves down the document and then executes a block.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>some text</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_pad_top'>pad_top</span><span class='lparen'>(</span><span class='int'>100</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is 100 points below the previous line of text</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This text appears right below the previous line of text</span><span class='tstring_end'>&quot;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


481
482
483
484</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 481</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pad_top'>pad_top</span><span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_move_down'>move_down</span><span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span>
  <span class='kw'>yield</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="page_count-instance_method">
  
    #<strong>page_count</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the number of pages in the document</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Prawn::Document#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_page_count'>page_count</span> <span class='comment'>#=&gt; 1
</span><span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_start_new_page'>start_new_page</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_page_count'>page_count</span> <span class='comment'>#=&gt; 4
</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


336
337
338</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 336</span>

<span class='kw'>def</span> <span class='id identifier rubyid_page_count'>page_count</span>
  <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_page_count'>page_count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="page_match?-instance_method">
  
    #<strong>page_match?</strong>(page_filter, page_number)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Provides a way to execute a block of code repeatedly based on a page_filter.</p>

<p>Available page filters are:</p>

<pre class="code ruby"><code class="ruby">:all         repeats on every page
:odd         repeats on odd pages
:even        repeats on even pages
some_array   repeats on every page listed in the array
some_range   repeats on every page included in the range
some_lambda  yields page number and repeats for true return values
</code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


649
650
651
652
653
654
655
656
657
658
659
660
661
662</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 649</span>

<span class='kw'>def</span> <span class='id identifier rubyid_page_match?'>page_match?</span><span class='lparen'>(</span><span class='id identifier rubyid_page_filter'>page_filter</span><span class='comma'>,</span> <span class='id identifier rubyid_page_number'>page_number</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_page_filter'>page_filter</span>
  <span class='kw'>when</span> <span class='symbol'>:all</span>
    <span class='kw'>true</span>
  <span class='kw'>when</span> <span class='symbol'>:odd</span>
    <span class='id identifier rubyid_page_number'>page_number</span><span class='period'>.</span><span class='id identifier rubyid_odd?'>odd?</span>
  <span class='kw'>when</span> <span class='symbol'>:even</span>
    <span class='id identifier rubyid_page_number'>page_number</span><span class='period'>.</span><span class='id identifier rubyid_even?'>even?</span>
  <span class='kw'>when</span> <span class='const'>Range</span><span class='comma'>,</span> <span class='const'>Array</span>
    <span class='id identifier rubyid_page_filter'>page_filter</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_page_number'>page_number</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Proc</span>
    <span class='id identifier rubyid_page_filter'>page_filter</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_page_number'>page_number</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render-instance_method">
  
    #<strong>render</strong>(*arguments, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Renders the PDF document to string. Pass an open file descriptor to render to file.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


394
395
396
397
398
399
400
401</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 394</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render'>render</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_page_count'>page_count</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_go_to_page'>go_to_page</span> <span class='id identifier rubyid_i'>i</span>
    <span class='id identifier rubyid_repeaters'>repeaters</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_renderer'>renderer</span><span class='period'>.</span><span class='id identifier rubyid_render'>render</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_file-instance_method">
  
    #<strong>render_file</strong>(filename)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Renders the PDF document to file.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_render_file'>render_file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo.pdf</span><span class='tstring_end'>&quot;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


407
408
409</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 407</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_file'>render_file</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wb</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_render'>render</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="repeat-instance_method">
  
    #<strong>repeat</strong>(page_filter, options = {}, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Provides a way to execute a block of code repeatedly based on a page_filter.  Since Stamp is used under the hood, this method is very space efficient.</p>

<p>Available page filters are:</p>

<pre class="code ruby"><code class="ruby">:all        -- repeats on every page
:odd        -- repeats on odd pages
:even       -- repeats on even pages
some_array  -- repeats on every page listed in the array
some_range  -- repeats on every page included in the range
some_lambda -- yields page number and repeats for true return values
</code></pre>

<p>Also accepts an optional second argument for dynamic content which executes the code in the context of the filtered pages without using a Stamp.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Prawn::Document (class)">Document</a></span></span><span class='period'>.</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="#generate-class_method" title="Prawn::Document.generate (method)">generate</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>repeat.pdf</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:skip_page_creation</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span>

  <span class='id identifier rubyid_repeat'>repeat</span> <span class='symbol'>:all</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_draw_text'>draw_text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ALLLLLL</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:at</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_top_left'>top_left</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_repeat'>repeat</span> <span class='symbol'>:odd</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_draw_text'>draw_text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ODD</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:at</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_repeat'>repeat</span> <span class='symbol'>:even</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_draw_text'>draw_text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EVEN</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:at</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_repeat'>repeat</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_draw_text'>draw_text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[1,2]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:at</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>100</span><span class='comma'>,</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_repeat'>repeat</span> <span class='int'>2</span><span class='op'>..</span><span class='int'>4</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_draw_text'>draw_text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2..4</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:at</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_repeat'>repeat</span><span class='lparen'>(</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pg'>pg</span><span class='op'>|</span> <span class='id identifier rubyid_pg'>pg</span> <span class='op'>%</span> <span class='int'>3</span> <span class='op'>==</span> <span class='int'>0</span> <span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_draw_text'>draw_text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Every third</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:at</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>250</span><span class='comma'>,</span> <span class='int'>20</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='int'>10</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_start_new_page'>start_new_page</span>
    <span class='id identifier rubyid_draw_text'>draw_text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A wonderful page</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:at</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>400</span><span class='comma'>,</span><span class='int'>400</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_repeat'>repeat</span><span class='lparen'>(</span><span class='symbol'>:all</span><span class='comma'>,</span> <span class='symbol'>:dynamic</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_text'>text</span> <span class='id identifier rubyid_page_number'>page_number</span><span class='comma'>,</span> <span class='symbol'>:at</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>500</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80
81
82
83</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/repeater.rb', line 78</span>

<span class='kw'>def</span> <span class='id identifier rubyid_repeat'>repeat</span><span class='lparen'>(</span><span class='id identifier rubyid_page_filter'>page_filter</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dynamic'>dynamic</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:dynamic</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_repeaters'>repeaters</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Repeater.html" title="Prawn::Repeater (class)">Repeater</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Repeater.html#initialize-instance_method" title="Prawn::Repeater#initialize (method)">new</a></span></span><span class='lparen'>(</span>
    <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_page_filter'>page_filter</span><span class='comma'>,</span> <span class='id identifier rubyid_dynamic'>dynamic</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_font-instance_method">
  
    #<strong>save_font</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Saves the current font, and then yields. When the block finishes, the original font is restored.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211
212
213
214
215
216
217</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/font.rb', line 209</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_font'>save_font</span>
  <span class='ivar'>@font</span> <span class='op'>||=</span> <span class='id identifier rubyid_find_font'>find_font</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Helvetica</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_original_font'>original_font</span> <span class='op'>=</span> <span class='ivar'>@font</span>
  <span class='id identifier rubyid_original_size'>original_size</span> <span class='op'>=</span> <span class='ivar'>@font_size</span>

  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_set_font'>set_font</span><span class='lparen'>(</span><span class='id identifier rubyid_original_font'>original_font</span><span class='comma'>,</span> <span class='id identifier rubyid_original_size'>original_size</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_original_font'>original_font</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_font-instance_method">
  
    #<strong>set_font</strong>(font, size = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the font directly, given an actual Font object and size.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/font.rb', line 201</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_font'>set_font</span><span class='lparen'>(</span><span class='id identifier rubyid_font'>font</span><span class='comma'>,</span> <span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@font</span> <span class='op'>=</span> <span class='id identifier rubyid_font'>font</span>
  <span class='ivar'>@font_size</span> <span class='op'>=</span> <span class='id identifier rubyid_size'>size</span> <span class='kw'>if</span> <span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="span-instance_method">
  
    #<strong>span</strong>(width, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A span is a special purpose bounding box that allows a column of elements to be positioned relative to the margin_box.</p>

<p>Arguments:</p>
<dl class="rdoc-list note-list"><dt><code>width</code>
<dd>
<p>The width of the column in PDF points</p>
</dd></dl>

<p>Options:</p>
<dl class="rdoc-list note-list"><dt><code>:position</code>
<dd>
<p>One of :left, :center, :right or an x offset</p>
</dd></dl>

<p>This method is typically used for flowing a column of text from one page to the next.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_span'>span</span><span class='lparen'>(</span><span class='int'>350</span><span class='comma'>,</span> <span class='symbol'>:position</span> <span class='op'>=&gt;</span> <span class='symbol'>:center</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Here&#39;s some centered text in a 350 point column. </span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>100</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document/span.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_span'>span</span><span class='lparen'>(</span><span class='id identifier rubyid_width'>width</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='period'>.</span><span class='id identifier rubyid_verify_options'>verify_options</span> <span class='lbracket'>[</span><span class='symbol'>:position</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
  <span class='id identifier rubyid_original_position'>original_position</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span>

  <span class='comment'># FIXME: Any way to move this upstream?
</span>  <span class='id identifier rubyid_left_boundary'>left_boundary</span> <span class='op'>=</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:position</span><span class='comma'>,</span> <span class='symbol'>:left</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='symbol'>:left</span>
      <span class='id identifier rubyid_margin_box'>margin_box</span><span class='period'>.</span><span class='id identifier rubyid_absolute_left'>absolute_left</span>
    <span class='kw'>when</span> <span class='symbol'>:center</span>
      <span class='id identifier rubyid_margin_box'>margin_box</span><span class='period'>.</span><span class='id identifier rubyid_absolute_left'>absolute_left</span> <span class='op'>+</span> <span class='id identifier rubyid_margin_box'>margin_box</span><span class='period'>.</span><span class='id identifier rubyid_width'>width</span> <span class='op'>/</span> <span class='float'>2.0</span> <span class='op'>-</span> <span class='id identifier rubyid_width'>width</span> <span class='op'>/</span> <span class='float'>2.0</span>
    <span class='kw'>when</span> <span class='symbol'>:right</span>
      <span class='id identifier rubyid_margin_box'>margin_box</span><span class='period'>.</span><span class='id identifier rubyid_absolute_right'>absolute_right</span> <span class='op'>-</span> <span class='id identifier rubyid_width'>width</span>
    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Numeric.html" title="Numeric (class)">Numeric</a></span></span>
      <span class='id identifier rubyid_margin_box'>margin_box</span><span class='period'>.</span><span class='id identifier rubyid_absolute_left'>absolute_left</span> <span class='op'>+</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:position</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Invalid option for :position</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>

  <span class='comment'># we need to bust out of whatever nested bounding boxes we&#39;re in.
</span>  <span class='id identifier rubyid_canvas'>canvas</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_bounding_box'>bounding_box</span><span class='lparen'>(</span>
      <span class='lbracket'>[</span>
        <span class='id identifier rubyid_left_boundary'>left_boundary</span><span class='comma'>,</span>
        <span class='id identifier rubyid_margin_box'>margin_box</span><span class='period'>.</span><span class='id identifier rubyid_absolute_top'>absolute_top</span>
      <span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='id identifier rubyid_width'>width</span>
    <span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='id identifier rubyid_original_position'>original_position</span>
      <span class='kw'>yield</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_new_page-instance_method">
  
    #<strong>start_new_page</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates and advances to a new page in the document.</p>

<p>Page size, margins, and layout can also be set when generating a new page. These values will become the new defaults for page creation</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_start_new_page'>start_new_page</span> <span class='comment'>#=&gt; Starts new page keeping current values
</span><span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_start_new_page'>start_new_page</span><span class='lparen'>(</span><span class='symbol'>:size</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LEGAL</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:layout</span> <span class='op'>=&gt;</span> <span class='symbol'>:landscape</span><span class='rparen'>)</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_start_new_page'>start_new_page</span><span class='lparen'>(</span><span class='symbol'>:left_margin</span> <span class='op'>=&gt;</span> <span class='int'>50</span><span class='comma'>,</span> <span class='symbol'>:right_margin</span> <span class='op'>=&gt;</span> <span class='int'>50</span><span class='rparen'>)</span>
<span class='id identifier rubyid_pdf'>pdf</span><span class='period'>.</span><span class='id identifier rubyid_start_new_page'>start_new_page</span><span class='lparen'>(</span><span class='symbol'>:margin</span> <span class='op'>=&gt;</span> <span class='int'>100</span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/document.rb', line 254</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start_new_page'>start_new_page</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_last_page'>last_page</span> <span class='op'>=</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_page'>page</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_last_page'>last_page</span>
    <span class='id identifier rubyid_last_page_size'>last_page_size</span> <span class='op'>=</span> <span class='id identifier rubyid_last_page'>last_page</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='id identifier rubyid_last_page_layout'>last_page_layout</span> <span class='op'>=</span> <span class='id identifier rubyid_last_page'>last_page</span><span class='period'>.</span><span class='id identifier rubyid_layout'>layout</span>
    <span class='id identifier rubyid_last_page_margins'>last_page_margins</span> <span class='op'>=</span> <span class='id identifier rubyid_last_page'>last_page</span><span class='period'>.</span><span class='id identifier rubyid_margins'>margins</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_page_options'>page_options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>size:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_last_page_size'>last_page_size</span><span class='comma'>,</span>
    <span class='label'>layout:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:layout</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_last_page_layout'>last_page_layout</span><span class='comma'>,</span>
    <span class='label'>margins:</span> <span class='id identifier rubyid_last_page_margins'>last_page_margins</span>
  <span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_last_page'>last_page</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_last_page'>last_page</span><span class='period'>.</span><span class='id identifier rubyid_graphic_state'>graphic_state</span>
      <span class='id identifier rubyid_new_graphic_state'>new_graphic_state</span> <span class='op'>=</span> <span class='id identifier rubyid_last_page'>last_page</span><span class='period'>.</span><span class='id identifier rubyid_graphic_state'>graphic_state</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='kw'>end</span>

    <span class='comment'># erase the color space so that it gets reset on new page for fussy
</span>    <span class='comment'># pdf-readers
</span>    <span class='id identifier rubyid_new_graphic_state'>new_graphic_state</span><span class='op'>&amp;.</span><span class='id identifier rubyid_color_space'>color_space</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

    <span class='id identifier rubyid_page_options'>page_options</span><span class='lbracket'>[</span><span class='symbol'>:graphic_state</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_new_graphic_state'>new_graphic_state</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_page'>page</span> <span class='op'>=</span> <span class='const'>PDF</span><span class='op'>::</span><span class='const'>Core</span><span class='op'>::</span><span class='const'>Page</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_page_options'>page_options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_apply_margin_options'>apply_margin_options</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_generate_margin_box'>generate_margin_box</span>

  <span class='comment'># Reset the bounding box if the new page has different size or layout
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_last_page'>last_page</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_last_page'>last_page</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>!=</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>||</span>
                   <span class='id identifier rubyid_last_page'>last_page</span><span class='period'>.</span><span class='id identifier rubyid_layout'>layout</span> <span class='op'>!=</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_layout'>layout</span><span class='rparen'>)</span>
    <span class='ivar'>@bounding_box</span> <span class='op'>=</span> <span class='ivar'>@margin_box</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_use_graphic_settings'>use_graphic_settings</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:orphan</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_insert_page'>insert_page</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_page'>page</span><span class='comma'>,</span> <span class='ivar'>@page_number</span><span class='rparen'>)</span>
    <span class='ivar'>@page_number</span> <span class='op'>+=</span> <span class='int'>1</span>

    <span class='kw'>if</span> <span class='ivar'>@background</span>
      <span class='id identifier rubyid_canvas'>canvas</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_image'>image</span><span class='lparen'>(</span><span class='ivar'>@background</span><span class='comma'>,</span> <span class='label'>scale:</span> <span class='ivar'>@background_scale</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='id identifier rubyid_bounds'>bounds</span><span class='period'>.</span><span class='id identifier rubyid_top_left'>top_left</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='ivar'>@y</span> <span class='op'>=</span> <span class='ivar'>@bounding_box</span><span class='period'>.</span><span class='id identifier rubyid_absolute_top'>absolute_top</span>

    <span class='id identifier rubyid_float'>float</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_on_page_create_action'>on_page_create_action</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="width_of-instance_method">
  
    #<strong>width_of</strong>(string, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the width of the given string using the given font. If :size is not specified as one of the options, the string is measured using the current font size. You can also pass :kerning as an option to indicate whether kerning should be used when measuring the width (defaults to <code>false</code>).</p>

<p>Note that the string <em>must</em> be encoded properly for the font being used. For AFM fonts, this is WinAnsi. For TTF, make sure the font is encoded as UTF-8. You can use the Font#normalize_encoding method to make sure strings are in an encoding appropriate for the current font. – For the record, this method used to be a method of Font (and still delegates to width computations on Font). However, having the primary interface for calculating string widths exist on Font made it tricky to write extensions for Prawn in which widths are computed differently (e.g., taking formatting tags into account, or the like).</p>

<p>By putting width_of here, on Document itself, extensions may easily override it and redefine the width calculation behavior. ++</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/prawn/font.rb', line 129</span>

<span class='kw'>def</span> <span class='id identifier rubyid_width_of'>width_of</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span> <span class='symbol'>:inline_format</span>
    <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:inline_format</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>

    <span class='comment'># Build up an Arranger with the entire string on one line, finalize it,
</span>    <span class='comment'># and find its width.
</span>    <span class='id identifier rubyid_arranger'>arranger</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Prawn.html" title="Prawn (module)">Prawn</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Text.html" title="Prawn::Text (module)">Text</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Text/Formatted.html" title="Prawn::Text::Formatted (module)">Formatted</a></span></span><span class='op'>::</span><span class='const'>Arranger</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_arranger'>arranger</span><span class='period'>.</span><span class='id identifier rubyid_consumed'>consumed</span> <span class='op'>=</span> <span class='id identifier rubyid_text_formatter'>text_formatter</span><span class='period'>.</span><span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_arranger'>arranger</span><span class='period'>.</span><span class='id identifier rubyid_finalize_line'>finalize_line</span>

    <span class='id identifier rubyid_arranger'>arranger</span><span class='period'>.</span><span class='id identifier rubyid_line_width'>line_width</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_width_of_string'>width_of_string</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Aug  1 21:07:57 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.7.1).
</div>

    </div>
  </body>
</html>